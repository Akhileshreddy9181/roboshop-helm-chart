apiVersion: v1
kind: Pod
metadata:
  name: {{ .Values.component }}
  labels:
    {{- include "roboshop.labels" . | nindent 4 }}
spec:
  serviceAccountName: {{ .Values.component }}
  containers:
    - name: {{ .Values.component }}
      image: 191164592803.dkr.ecr.us-east-1.amazonaws.com/{{ .Values.component }}:{{ .Values.appversion }}
      volumeMounts:
        - mountPath: /params
          name: params
  initContainers:
    - name: aws-ssm-param-store
      image: 191164592803.dkr.ecr.us-east-1.amazonaws.com/aws-ssm-param-store:2.0.0
      args: [ "{{ .Values.params }}"]
      volumeMounts:
        - mountPath: /params
          name: params
  volumes:
    - name: params
      emptyDir:
        sizeLimit: 100Mi